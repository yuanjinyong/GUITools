allprojects { p ->
	afterEvaluate {
		def isJavaProject = false
		plugins.withType(JavaPlugin) { isJavaProject = true }

		plugins.withType(EclipsePlugin) {
			eclipse {
				classpath {
					if (isJavaProject) {
						println p.sourceSets.main.output.classesDir
						defaultOutputDir = p.sourceSets.main.output.classesDir
						downloadSources = true
						downloadJavadoc = false
					}
				}

				project { comment = p.description }
			}
		}
	}
}